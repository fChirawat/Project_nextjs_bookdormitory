datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       Int      @id @default(autoincrement())
  username String   @unique
  email    String   @unique
  phone    String   @unique
  password String
  profile  Profile? // Linked to Profile

  @@unique([username, email, phone])
}

model Profile {
  id                Int    @id @default(autoincrement())
  userId            Int    @unique
  firstName         String
  lastName          String
  address           String
  photoIdCard       String
  relationship      String
  phoneRelationship String
  user              User   @relation(fields: [userId], references: [id]) // Linked back to User
}

model UserSell {
  id        Int          @id @default(autoincrement())
  username  String       @unique
  email     String       @unique
  phone     String       @unique
  password  String
  profile   ProfileSell? // Linked to ProfileSell
  formSells FormSell[]   // Linked to FormSell

  @@unique([username, email, phone])
}

model ProfileSell {
  id          Int      @id @default(autoincrement())
  userId      Int      @unique
  firstName   String
  lastName    String
  address     String
  photoIdCard String
  userSell    UserSell @relation(fields: [userId], references: [id]) // Linked back to UserSell
}

model FormSell {
  id                Int      @id @default(autoincrement())
  userSellId        Int
  nameDormitory     String
  typeDormitory     String
  addressDormitory  String
  dormitoryDetails  String?
  facilities        String
  roomNumber        Int
  distanceDormitory Float
  roomDeposit       Float
  priceMonth        Float
  priceElectricity  Float
  priceWater        Float
  priceWifi         Float
  priceOther        Float
  photoDormitory    String?
  userSell          UserSell @relation(fields: [userSellId], references: [id]) // Linked back to UserSell
}
